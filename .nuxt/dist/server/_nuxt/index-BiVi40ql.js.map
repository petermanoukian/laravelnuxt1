{"version":3,"file":"index-BiVi40ql.js","sources":["../../../../pages/prod/viewprodbycatsub/[catid]/index.vue"],"sourcesContent":["<script setup>\r\nimport { ref, onMounted, watch, computed } from 'vue'\r\nimport { useRuntimeConfig, useNuxtApp } from '#imports'\r\nimport { useRouter, useRoute } from 'vue-router'\r\nconst router = useRouter()\r\nconst route = useRoute()\r\nconst config = useRuntimeConfig()\r\nimport { useFetch } from '#app' \r\n\r\nconst { $api } = useNuxtApp()\r\nconst apiUrl = useRuntimeConfig().public.apiBaseUrl\r\n\r\n\r\nimport { useProdopenpagination } from '~/composables/useProdopenpagination'\r\n\r\nimport { useProdsearchopenpagination } from '~/composables/useProdsearchopenpagination'\r\nimport debounce from 'lodash/debounce'\r\n\r\nconst { prods, currentPage, lastPage, changePage, pageNumbers, fetchProds } = useProdopenpagination()\r\n\r\nconst { prodsx, currentPagex, lastPagex, changePagex, pageNumbersx, fetchsearchProds } = useProdsearchopenpagination()\r\n\r\nconst catidx = route.params.catid\r\nconst subidx = route.params.subid\r\nconst cat= ref(null)\r\nconst subcat= ref(null)\r\n\r\nconst fetchCat = async () => {\r\n  try \r\n  {  \r\n    const response = await fetch(`${apiUrl}/cat/detail/${catidx}`)\r\n    const data = await response.json() \r\n    cat.value = data\r\n    //JSON.stringify(cat.value)\r\n  } \r\n  catch (error) \r\n  {\r\n\tconsole.error('Error fetching item:', error.response ? error.response.data : error.message)\r\n  }\r\n}\r\n\r\nconst fetchSub = async () => {\r\n  try \r\n  {\r\n\r\n    const response = await fetch(`${apiUrl}/subcat/detail/${subidx}`)\r\n\tconst data = await response.json() \r\n    subcat.value = data\r\n\r\n  } \r\n  catch (error) \r\n  {\r\n    console.error('Error fetching item:', error.response ? error.response.data : error.message)\r\n  }\r\n}\r\n\r\n\r\n\r\nimport { useHead } from 'nuxt/app'\r\n\r\nawait fetchCat()\r\nawait fetchSub()\r\n  \r\n   if (cat.value && subcat.value) {\r\n    useHead({\r\n      title: subcat.value.name + ' ' +  cat.value.name,\r\n      meta: [\r\n        {\r\n          name: 'description',\r\n          content: subcat.value.name + ' ' + cat.value.name + ' Nuxt3 Laravel 11 MySQl API Products Page'\r\n        },\r\n        {\r\n          name: 'keywords',\r\n          content: subcat.value.name + ', ' + cat.value.name + ', Nuxt3 Laravel 11 MySQl API Web Development Armenia, Web Developer Lebanon'\r\n        },\r\n        {\r\n          property: 'og:title',\r\n          content: subcat.value.name + ' ' + cat.value.name\r\n        },\r\n        {\r\n          property: 'og:description',\r\n          content: subcat.value.name + ' ' + cat.value.name + ' Nuxt3 Laravel 11 MySQl API Products Page'\r\n        }\r\n      ]\r\n    })\r\n  }\r\n\r\nonMounted(async () => {\r\n  await fetchProds(catidx, subidx)\r\n})\r\n\r\nconst key = ref(0)\r\n\r\n</script>\r\n\r\n<template>\r\n\t<div class=\"container-xxl py-1\">\r\n\t\t<div class=\"container\">\r\n\t\t\t<h1 class=\"text-center mb-1 wow fadeInUp\" data-wow-delay=\"0.1s\">Products</h1>\r\n\t\t\t<div v-if =\"cat && cat.name\">\r\n\t\t\t\t<h3>Category: {{ cat.name }} </h3>\r\n\t\t\t\t<p v-if=\"cat.img\">\r\n\t\t\t\t  <img :src=\"`${config.public.BaseUrl}/images/cat/${cat.img}`\"\r\n\t\t\t\t  :alt=\"cat.name\" class=\"mt-2 mb-2 maxwidth96height300\"/>\r\n\t\t\t\t</p> \r\n\t\t\t\t<p v-else>\r\n\t\t\t\t\t<img src=\"~/assets/default/1.jpg\" alt=\"Default Picture\" class=\"mt-2 mb-2 \"/>\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t\t<div v-if =\"subcat && subcat.name\">\r\n\t\t\t\t<h3>SubCategory: {{ subcat.name }} </h3>\r\n\t\t\t\t<p v-if=\"subcat.img\">\r\n\t\t\t\t  <img :src=\"`${config.public.BaseUrl}/images/subcat/${subcat.img}`\"\r\n\t\t\t\t  :alt=\"cat.name\" class=\"mt-2 mb-2 maxwidth96height300\"/>\r\n\t\t\t\t</p> \r\n\t\t\t\t<p v-else>\r\n\t\t\t\t\t<img src=\"~/assets/default/1.jpg\" alt=\"Default Picture\" class=\"mt-2 mb-2 \"/>\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t\t<div class ='mt-2 row'> <b>Products </b></div>\r\n\t\t\t<div class=\"row g-4 \" v-if=\"prods && prods.length > 0\">\r\n\t\t\t\t<Prodsopen\r\n\t\t\t\t  :prods=\"prods\" \r\n\t\t\t\t  :currentPage=\"currentPage\" \r\n\t\t\t\t  :lastPage=\"lastPage\" \r\n\t\t\t\t  :changePage=\"changePage\" \r\n\t\t\t\t  :pageNumbers=\"pageNumbers\"  \r\n\t\t\t\t  :key=\"key.value\"\r\n\t\t\t\t  :catid=\"catidx\"\r\n\t\t\t\t  :subid=\"subidx\"\t\t\t\t  \r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t<div  v-else class=\"row g-4 mt-4\">\r\n\t\t\t\tNothing found\r\n\t\t\t</div>\t\r\n\t\r\n\t\t</div>\r\n\t</div>\r\n</template>"],"names":["_withAsyncContext"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIe,cAAW;AAC1B,UAAM,QAAQ,SAAU;AACxB,UAAM,SAAS,iBAAkB;AAGhB,eAAY;AAC7B,UAAM,SAAS,mBAAmB,OAAO;AAQzC,UAAM,EAAE,OAAO,aAAa,UAAU,YAAY,aAAa,WAAY,IAAG,sBAAuB;AAEZ,gCAA6B;AAEtH,UAAM,SAAS,MAAM,OAAO;AAC5B,UAAM,SAAS,MAAM,OAAO;AAC5B,UAAM,MAAK,IAAI,IAAI;AACnB,UAAM,SAAQ,IAAI,IAAI;AAEtB,UAAM,WAAW,YAAY;AAC3B,UACA;AACE,cAAM,WAAW,MAAM,MAAM,GAAG,MAAM,eAAe,MAAM,EAAE;AAC7D,cAAM,OAAO,MAAM,SAAS,KAAM;AAClC,YAAI,QAAQ;AAAA,MAEb,SACM,OACP;AACD,gBAAQ,MAAM,wBAAwB,MAAM,WAAW,MAAM,SAAS,OAAO,MAAM,OAAO;AAAA,MACxF;AAAA,IACH;AAEA,UAAM,WAAW,YAAY;AAC3B,UACA;AAEE,cAAM,WAAW,MAAM,MAAM,GAAG,MAAM,kBAAkB,MAAM,EAAE;AACnE,cAAM,OAAO,MAAM,SAAS,KAAM;AAC/B,eAAO,QAAQ;AAAA,MAEhB,SACM,OACP;AACE,gBAAQ,MAAM,wBAAwB,MAAM,WAAW,MAAM,SAAS,OAAO,MAAM,OAAO;AAAA,MAC3F;AAAA,IACH;AAMA,IAAM,CAAA,QAAA,SAAA,IAAAA,iBAAA,MAAA,SAAQ,CAAC;AACf,IAAM,CAAA,QAAA,SAAA,IAAAA,iBAAA,MAAA,SAAQ,CAAC;AAEZ,QAAI,IAAI,SAAS,OAAO,OAAO;AAC9B,cAAQ;AAAA,QACN,OAAO,OAAO,MAAM,OAAO,MAAO,IAAI,MAAM;AAAA,QAC5C,MAAM;AAAA,UACJ;AAAA,YACE,MAAM;AAAA,YACN,SAAS,OAAO,MAAM,OAAO,MAAM,IAAI,MAAM,OAAO;AAAA,UACrD;AAAA,UACD;AAAA,YACE,MAAM;AAAA,YACN,SAAS,OAAO,MAAM,OAAO,OAAO,IAAI,MAAM,OAAO;AAAA,UACtD;AAAA,UACD;AAAA,YACE,UAAU;AAAA,YACV,SAAS,OAAO,MAAM,OAAO,MAAM,IAAI,MAAM;AAAA,UAC9C;AAAA,UACD;AAAA,YACE,UAAU;AAAA,YACV,SAAS,OAAO,MAAM,OAAO,MAAM,IAAI,MAAM,OAAO;AAAA,UACrD;AAAA,QACF;AAAA,MACP,CAAK;AAAA,IACF;AAMH,UAAM,MAAM,IAAI,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}